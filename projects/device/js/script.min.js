var link=document.querySelector(".contacts-button"),map=document.querySelector(".img-map"),preForm=document.querySelector(".pre-form"),popup=document.querySelector(".write-us"),mapPopup=document.querySelector(".map-popup"),closePopup=popup.querySelector(".write-us-close"),closeMap=document.querySelector(".map-popup-close"),inputName=popup.querySelector("[name=name]"),inputEmail=popup.querySelector("[name=email]"),inputText=popup.querySelector("[name=text"),isStorageSupport=!0,sorage="";try{storage=localStorage.getItem("inputName")}catch(e){isStorageSupport=!1}map.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("write-us-none"),preForm.classList.remove("write-us-none"),preForm.classList.add("write-us-show"),mapPopup.classList.add("write-us-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("write-us-none"),preForm.classList.add("write-us-none"),mapPopup.classList.remove("write-us-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("write-us-show")&&(mapPopup.classList.add("write-us-none"),preForm.classList.add("write-us-none"))}),link.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("write-us-none"),preForm.classList.remove("write-us-none"),preForm.classList.add("write-us-show"),popup.classList.add("write-us-show"),storage?(inputName.value=storage,inputEmail.focus()):(inputName.focus(),isStorageSupport&&localStorage.setItem("inputName",inputName.value))}),closePopup.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("write-us-none"),preForm.classList.add("write-us-none"),popup.classList.remove("write-us-error")}),popup.addEventListener("submit",function(e){inputName.value&&inputEmail.value&&inputText.value?localStorage.setItem("inputName",inputName.value):(e.preventDefault(),popup.classList.remove("write-us-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("write-us-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("write-us-show")&&(popup.classList.add("write-us-none"),preForm.classList.add("write-us-none"),popup.classList.remove("write-us-error"))}),preForm.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("write-us-none"),mapPopup.classList.add("write-us-none"),preForm.classList.add("write-us-none"),popup.classList.remove("write-us-error")});